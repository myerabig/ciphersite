<div class="caesar">
  <div class="offset-entry">
    <label for="offset">Offset (0-25): </label>
    <input id="offset" type="number" size="4" min="0" max="25" step="1" value="1" [(ngModel)]="caesarOffset"
           (ngModelChange)="handleCaesarOffsetChange()"/>
  </div>
  <div class="caesar-flex">
    <div>
      <label for="encrypt">Encrypt:</label>
      <br/>
      <textarea id="encrypt" rows="10" cols="50" [(ngModel)]="caesarPlaintext"
                (ngModelChange)="handleCaesarEncryptionChange()"></textarea>
    </div>
    <img src="https://starpng.com/public/uploads/preview/double-sided-arrow-png-51575265495yriug9wtzm.png"
         alt="double arrow" width="150px"/>
    <div>
      <label for="decrypt">Decrypt:</label>
      <br/>
      <textarea id="decrypt" rows="10" cols="50" [(ngModel)]="caesarCiphertext"
                (ngModelChange)="handleCaesarDecryptionChange()"></textarea>
    </div>
  </div>
  <div class="caesar-explanation">
    The Caesar cipher, named after Julius Caesar, is a simple cipher in which each plaintext letter is shifted by a
    fixed offset. For example, with an offset of 2, A becomes C, B becomes D, C becomes E, and so on.
    <a href="https://en.wikipedia.org/wiki/Caesar_cipher" target="_blank">Learn More!</a>
  </div>
  <div>
    <h4>Want to see the calculations?</h4>
    <button class="calcButton" (click)="showCalculations(true)">Show Details</button>
    <button class="calcButton" (click)="showCalculations(false)">Hide Details</button>
  </div>
  <div class="calculations" *ngIf="showMath">
    <table class="calcTable">
      <tr *ngFor="let char of caesarPlaintext.split(''); let i = index;">
        <td>{{char}}</td>
        <td *ngIf="char >= 'A' && char <= 'Z'"> + {{caesarOffset}} =></td>
        <td *ngIf="char >= 'A' && char <= 'Z'">{{char.charCodeAt(0) - 65}}</td>
        <td *ngIf="char >= 'A' && char <= 'Z'"> + {{caesarOffset}} =</td>
        <td *ngIf="char >= 'A' && char <= 'Z'">{{char.charCodeAt(0) - 65 + caesarOffset}}</td>
        <td *ngIf="char >= 'A' && char <= 'Z'"> (mod 26) =</td>
        <td *ngIf="char >= 'A' && char <= 'Z'">{{caesarCiphertext.charCodeAt(i) - 65}}</td>
        <td *ngIf="char >= 'A' && char <= 'Z'"> =</td>
        <td *ngIf="char >= 'A' && char <= 'Z'; else space">{{caesarCiphertext.charAt(i)}}</td>
        <ng-template #space>
          <td class="space"></td>
        </ng-template>
      </tr>
    </table>
  </div>
</div>
